"use strict";(()=>{var f=navigator.userAgent.includes("Electron"),O=navigator.userAgent.includes("Firefox");(f&&location.pathname==="/background.bundle.js"||O)&&(chrome.runtime.onConnectExternal={addListener(){}},chrome.runtime.onMessageExternal={addListener(){}},f?(chrome.notifications={onClicked:{addListener(){}},create(){},clear(){}},chrome.contextMenus={onClicked:{addListener(){}}},chrome.commands={onCommand:{addListener(){}}}):(chrome.storage.sync=chrome.storage.local,chrome.runtime.onInstalled={addListener:e=>e()}));if(f){(!chrome.storage.local||!chrome.storage.local.remove)&&(chrome.storage.local={set(t,n){for(let[i,a]of Object.entries(t))localStorage.setItem(i,a);n&&n()},get(t,n){let i=Object.fromEntries(Object.entries(t).map(([a,d])=>[a,localStorage.getItem(a)??d]));n&&n(i)},remove(t,n){if(Array.isArray(t))for(let i of t)localStorage.removeItem(i);else localStorage.removeItem(t);n&&n()}});let e=chrome.runtime.sendMessage;chrome.runtime.sendMessage=function(...t){return typeof t[arguments.length-1]=="function"&&Array.prototype.pop.call(t),e(...t)}}(O||f)&&(chrome.storage.sync=chrome.storage.local);var r={DO_NOT_FILTER:"DO_NOT_FILTER",DENYLIST_SPECIFIC:"DENYLIST_SPECIFIC",ALLOWLIST_SPECIFIC:"ALLOWLIST_SPECIFIC"};var u;var M=e=>({...e,filter:typeof e.filter=="boolean"?e.filter&&e.whitelist.length>0?r.ALLOWLIST_SPECIFIC:e.filter?r.DENYLIST_SPECIFIC:r.DO_NOT_FILTER:e.filter==="WHITELIST_SPECIFIC"?r.ALLOWLIST_SPECIFIC:e.filter==="BLACKLIST_SPECIFIC"?r.DENYLIST_SPECIFIC:e.filter}),g=e=>{u?e(u):chrome.storage.sync.get({useEditor:0,editor:"",projectPath:"",maxAge:50,filter:r.DO_NOT_FILTER,whitelist:"",blacklist:"",allowlist:"",denylist:"",shouldCatchErrors:!1,inject:!0,urls:`^https?://localhost|0\\.0\\.0\\.0:\\d+
^https?://.+\\.github\\.io`,showContextMenus:!0},function(t){u=M(t),e(u)})},C=()=>g(()=>{});var S=e=>e!==""?e.split(`
`).filter(Boolean).join("|"):null,A=e=>({...e,allowlist:e.filter!==r.DO_NOT_FILTER?S(e.allowlist):e.allowlist,denylist:e.filter!==r.DO_NOT_FILTER?S(e.denylist):e.denylist}),x=(e=u)=>!e||e.inject||!e.urls||location.href.match(S(e.urls));var c="@devtools-extension",I="@devtools-page",m=32*1024*1024,h=!1,s;function l(e){window.postMessage(e,"*")}function w(){h=!0;let e="tab";window.devToolsExtensionID?s=chrome.runtime.connect(window.devToolsExtensionID,{name:e}):s=chrome.runtime.connect({name:e}),s.onMessage.addListener(t=>{"action"in t?t.type==="DISPATCH"?l({type:t.type,payload:t.action,state:t.state,id:t.id,source:c}):t.type==="ACTION"?l({type:t.type,payload:t.action,state:t.state,id:t.id,source:c}):l({type:t.type,payload:t.action,state:t.state,id:t.id,source:c}):t.type==="OPTIONS"?l({type:t.type,options:A(t.options),id:void 0,source:c}):l({type:t.type,state:t.state,id:t.id,source:c})}),s.onDisconnect.addListener(L)}function L(){window.removeEventListener("message",b),window.postMessage({type:"STOP",failed:!0,source:c},"*"),s=void 0}function P(e,t){try{return e(t)}catch(n){if(n.message==="Message length exceeded maximum allowed length."){let i=t.instanceId,a={split:"start"},d=[],T=0,p;Object.keys(t).map(o=>{if(p=t[o],typeof p=="string"&&(T+=p.length,T>m)){d.push([o,p]);return}a[o]=p}),e(a);for(let o=0;o<d.length;o++)for(let y=0;y<d[o][1].length;y+=m)e({instanceId:i,source:I,split:"chunk",chunk:[d[o][0],d[o][1].substr(y,m)]});return e({instanceId:i,source:I,split:"end"})}L()}}function E(e){s.postMessage(e)}function F(e){h||w(),e.type==="INIT_INSTANCE"?(g(t=>{l({type:"OPTIONS",options:A(t),id:void 0,source:c})}),E({name:"INIT_INSTANCE",instanceId:e.instanceId})):E({name:"RELAY",message:e})}function b(e){if(!x()||!e||e.source!==window||typeof e.data!="object")return;let t=e.data;if(t.source===I){if(t.type==="DISCONNECT"){s&&(s.disconnect(),h=!1);return}P(F,t)}}C();window.addEventListener("message",b,!1);})();
